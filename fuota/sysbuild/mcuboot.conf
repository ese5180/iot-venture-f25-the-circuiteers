# MCUboot configuration for FUOTA
# Enable logging for MCUboot (now that we have 36KB boot partition)
CONFIG_LOG=y
CONFIG_MCUBOOT_LOG_LEVEL_WRN=y

# Serial Recovery disabled - boot normally
# CONFIG_MCUBOOT_SERIAL=y
# CONFIG_BOOT_SERIAL_UART=y

# Enable console UART for logging
CONFIG_UART_CONSOLE=y

# LED indication not needed
# CONFIG_MCUBOOT_INDICATION_LED=y

# Essential flash and partition configurations
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y

# Enable image validation
CONFIG_BOOT_VALIDATE_SLOT0=y

# Enable basic MCUboot functionality
CONFIG_BOOT_BOOTSTRAP=n

# CRITICAL: MCUboot bootloader must start at flash base (0x0)
CONFIG_FLASH_LOAD_OFFSET=0x0

# Boot partition size set to 36KB (minimum required)
CONFIG_FLASH_LOAD_SIZE=0x9000

# Enable image swapping with scratch area for FUOTA
CONFIG_BOOT_SWAP_USING_SCRATCH=y

# Disable upgrade-only mode to enable full swapping
CONFIG_BOOT_UPGRADE_ONLY=n

# Configure sector count for partition management
CONFIG_BOOT_MAX_IMG_SECTORS=128
CONFIG_BOOT_MAX_IMG_SECTORS_AUTO=n